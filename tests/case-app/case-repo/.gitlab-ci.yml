
stages:
  - build

build-code-job:
  stage: build
  script:
    - cd src
    - g++ compositematrix_tests.cpp concretematrix_tests.cpp symbolicmatrix_tests.cpp element_tests.cpp compositematrix.cpp elementarymatrix.cpp element.cpp -o ../out/runnable --coverage -std=c++11
    - cd ../out
    - valgrind --leak-check=full --show-leak-kinds=all ./runnable -r compact
    - lcov -t "runnable" -o tests.info -c -d .
    - genhtml -o coverage tests.info
    - cppcheck ./ -i./catch.h  --enable=style --force --xml 2> cppcheck.xml
